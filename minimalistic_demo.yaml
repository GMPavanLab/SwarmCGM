# 1. GENERAL
gmx_path: gmx  # path/alias to GROMACS
exec_folder: ""  # string, empty = new directory named after timestamp, filled = continue opti from current state of this given directory
nb_particles: 3  # 'auto' or integer, size of the swarm of particles

# 2. REFERENCE ALL-ATOM (AA) DATA USED FOR THE BOTTOM-UP COMPONENT OF THE SCORE
mapping_type: MARTINI3REMAP  # string, your mapping/framework type (defines where input files will be searched for)
solv: WET  # WET or DRY, for explicit or implicit solvent (defines where input files will be searched for)
lipids_codes:  # lipids and temperatures to use for this optimization (other input files must be prepared accordingly)
  POPC: [303K]
  DOPC: [303K]
map_center: COG  # COG or COM, for using Center Of Geometry or Center Of Mass when reading the NDX files and getting the AA-mapped bottom-up ref. data
reset: True  # if True, recalculates bond and angle distributions and distance distributions between pair of beads from the AA data
phosphate_pos:  # position of the phosphate atom or bead, used for calculating Dhh membrane thickness
  PC:  # per head type
    AA: 20  # atom id of the phosphate, 1-indexed
    CG: 2  # bead id of the bead containing the phosphate, 1-indexed

# 3. CONDITIONS OF THE OPTIMIZATION: CHOICE OF THE PARAMETERS TO BE OPTIMIZED
cg_time_equi: 3  # ns, CG MD equilibration time
cg_time_prod: 20  # ns, CG MD production time
tune_bonds_equi_val: all  # 'all' or list of bond types for which equilibrium values will be optimized or empty list
tune_bonds_fct: all  # 'all' or list of bond types for which force constants will be optimized or empty list
tune_angles_equi_val: [A2, A3, A4, A5, A6, A7, A8, A9, A10, A20, A21, A22]  # 'all' or list of angle types for which equilibrium values will be optimized or empty list
tune_angles_fct: all  # 'all' or list of angle types for which force constants will be optimized or empty list
tune_radii: False  # True or False, for tuning all radii for beads listed in 'init_beads_radii' (LJ sigma will be the sum of 2 radii for a pair of bead types)
tune_radii_in_groups: None  # bead radii can be tuned in groups, using the same radii for several types of beads
tune_epsilons: True

# 4. CONDITIONS OF THE OPTIMIZATION: RANGES OF THE PARAMETERS TO BE OPTIMIZED, THAT ARE ALLOWED TO BE EXPLORED
min_radius: 0.12  # nm, minimum bead radius
max_radius: 0.35  # nm, maximum bead radius
min_epsilon: 0.10  # kJ.mol-1, minimum LJ epsilon value
max_epsilon: 8.00  # kJ.mol-1, maximum LJ epsilon value
min_max_epsilon_relative_range: None  # float or None, limit the allowed range of LJ epsilons value around (+/-) the value given in 'init_nonbonded'
min_fct_bonds: 1000  # fct units
max_fct_bonds: 9000  # fct units
min_fct_angles: 0  # fct units
max_fct_angles: 70  # fct units
apl_base_perc_error: 10
dhh_base_perc_error: 10
apl_cap_perc_error: 30
dhh_cap_perc_error: 30

# 5. INITIALIZATION OF THE SWARM OF PARTICLES: AMPLITUDE OF THE VARIATIONS CREATED RANDOMLY AROUND THE STARTING FF PARAMETERS
#    (i.e. DEFINES +/- RANGES FOR RANDOM VARIATIONS AROUND VALUES IN 'init_bonded', 'init_nonbonded' and 'init_beads_radii')
bond_value_guess_variation: 0.02  # nm, defines also the allowed parameter search range in top-down calibration of bonds equilibrium values
angle_value_guess_variation: 20  # degrees, defines also the allowed parameter search range in top-down calibration of angles equilibrium values
bond_fct_guess_variation: 3000  # fct units
angle_fct_guess_variation: 15  # fct units
radius_guess_variation: 0.10  # nm
epsilon_guess_variation: 4  # kJ.mol-1

# 6. PARAMETERS FOR RUNNING OPTIMIZATION SIMULATIONS: GENERAL
nb_cores_analysis: 8  # number of cores to use for analysis on the machine or node running the optimisation software
gmx_mini_additional_args_str: ""  # string, additional arguments to be appended to the GROMACS command line for the minimization step
gmx_equi_additional_args_str: ""  # string, additional arguments to be appended to the GROMACS command line for the equilibration step
gmx_prod_additional_args_str: ""  # string, additional arguments to be appended to the GROMACS command line for the production step

# 7. PARAMETERS FOR RUNNING OPTIMIZATION SIMULATIONS: SPECIFIC TO HPC RESOURCE (SLURM ONLY)
master_job_name: "MASTER"  # name of the master job
nb_hpc_slots: 0  # max number of nodes to be used at a single time

# 8. PARAMETERS FOR RUNNING OPTIMIZATION SIMULATIONS: SPECIFIC TO A LOCAL COMPUTER
nb_threads: "4 4"  # string, space-separated number of OpenMP threads to use, defining the number of slots for simulations
gpu_ids: "X X"  # string, space-separated GPU ids to use per simulation slot defined in nb_threads, use 'X' for disabling GPU via 'gpu_cancel_str'
gmx_gpu_cancel_str: "-nb cpu"  # string, will be added to GROMACS commands for the slots which have disabled GPU usage (= marked 'X' in 'gpu_ids')

# 9. INITIAL FORCE FIELD PARAMETERS FOR BONDED TERMS
init_bonded:  # must correspond to bond and angle types as defined in your input ITP files
  B1: { val: 0, fct: 3000 }  # Bonds
  B2: { val: 0, fct: 3000 }  # nm, kJ.mol-1.nm-2
  B3: { val: 0, fct: 3000 }
  B4: { val: 0, fct: 3000 }
  B5: { val: 0, fct: 3000 }
  B6: { val: 0, fct: 3000 }
  B7: { val: 0, fct: 3000 }
  B8: { val: 0, fct: 3000 }
  B9: { val: 0, fct: 3000 }
  B10: { val: 0, fct: 3000 }
  B11: { val: 0, fct: 3000 }
  B12: { val: 0, fct: 3000 }
  B13: { val: 0, fct: 3000 }
  B14: { val: 0, fct: 3000 }
  A1: { val: 180, fct: 15 }  # Angles
  A2: { val: 0, fct: 15 }  # degrees, kJ.mol-1
  A3: { val: 0, fct: 15 }
  A4: { val: 0, fct: 15 }
  A5: { val: 0, fct: 15 }
  A6: { val: 0, fct: 15 }
  A7: { val: 0, fct: 15 }
  A8: { val: 0, fct: 15 }
  A9: { val: 0, fct: 15 }
  A10: { val: 0, fct: 15 }
  A11: { val: 0, fct: 15 }
  A12: { val: 0, fct: 15 }
  A13: { val: 0, fct: 15 }
  A14: { val: 0, fct: 15 }
  A15: { val: 0, fct: 15 }
  A16: { val: 0, fct: 15 }
  A17: { val: 0, fct: 15 }
  A18: { val: 0, fct: 15 }
  A19: { val: 0, fct: 15 }
  A20: { val: 0, fct: 15 }
  A21: { val: 0, fct: 15 }
  A22: { val: 0, fct: 15 }
  A23: { val: 0, fct: 15 }
  A24: { val: 0, fct: 15 }

# 10. INITIAL FORCE FIELD PARAMETERS FOR NON-BONDED TERMS
init_nonbonded:  # must correspond to bead types as defined in your input ITP files
  C1 C1: { sig: 0.470, eps: 3.000 }  # each pair of bead types must be sorted alphanumerically
  C1 C3: { sig: 0.470, eps: 3.000 }  # nm, kJ.mol-1
  C1 N2a: { sig: 0.470, eps: 3.000 }
  C1 Q0: { sig: 0.470, eps: 3.000 }
  C1 Q1: { sig: 0.470, eps: 3.000 }
  C1 SC2: { sig: 0.440, eps: 3.000 }
  C1 SC3: { sig: 0.440, eps: 3.000 }
  C3 C3: { sig: 0.470, eps: 3.000 }
  C3 N2a: { sig: 0.470, eps: 3.000 }
  C3 Q0: { sig: 0.470, eps: 3.000 }
  C3 Q1: { sig: 0.470, eps: 3.000 }
  C3 SC2: { sig: 0.440, eps: 3.000 }
  C3 SC3: { sig: 0.440, eps: 3.000 }
  N2a N2a: { sig: 0.470, eps: 3.000 }
  N2a Q0: { sig: 0.470, eps: 3.000 }
  N2a Q1: { sig: 0.470, eps: 3.000 }
  N2a SC2: { sig: 0.440, eps: 3.000 }
  N2a SC3: { sig: 0.440, eps: 3.000 }
  Q0 Q0: { sig: 0.470, eps: 3.000 }
  Q0 Q1: { sig: 0.470, eps: 3.000 }
  Q0 SC2: { sig: 0.440, eps: 3.000 }
  Q0 SC3: { sig: 0.440, eps: 3.000 }
  Q1 Q1: { sig: 0.470, eps: 3.000 }
  Q1 SC2: { sig: 0.440, eps: 3.000 }
  Q1 SC3: { sig: 0.440, eps: 3.000 }
  SC2 SC2: { sig: 0.430, eps: 3.000 }
  SC2 SC3: { sig: 0.430, eps: 3.000 }
  SC3 SC3: { sig: 0.430, eps: 3.000 }

# 11. RADII OF THE CG BEADS
init_beads_radii:
  Q0: 0  # nm
  Q1: 0
  N2a: 0
  C1: 0
  C3: 0
  SC2: 0
  SC3: 0

# 12. MASSES OF THE CG BEADS
beads_masses:
  Q0: 72  # u.m.a.
  Q1: 72
  N2a: 72
  C1: 72
  C3: 72
  SC2: 45
  SC3: 45

# 13. PARAMETERS FOR THE ANALYSIS OF THE BOTTOM-UP COMPONENT OF THE SCORE
bw_constraints: 0.002  # nm
bw_bonds: 0.01  # nm
bonds_max_range: 5  # nm, max range of the histograms created for EMD calculations
bw_angles: 2  # degrees
bw_dihedrals: 2  # degrees
bw_rdfs: 0.025  # nm
cutoff_rdfs: 2.5  # nm
eq_val_density_thres_constraints: 0.05  # cutoff to select equi val ranges, with respect to max density per constraint type
eq_val_density_thres_bonds: 0.05  # cutoff to select equi val ranges, with respect to max density per bond type
eq_val_density_thres_angles: 0.333  # cutoff to select equi val ranges, with respect to max density per angle type

# 14. EXPERIMENTAL DATA USED FOR THE TOP-DOWN COMPONENT OF THE SCORE
exp_data:
  POPC:
    303K: { apl: 0.643, Dhh: 3.65 }  # nm2, nm
  DOPC:
    303K: { apl: 0.674, Dhh: 3.68 }
  DPPC:
    323K: { apl: 0.631, Dhh: 3.86 }
  DMPC:
    303K: { apl: 0.598, Dhh: 3.49 }
  DLPC:
    303K: { apl: 0.608, Dhh: 2.98 }
  SDPC:
    303K: { apl: 0.704, Dhh: 3.52 }
  PDPC:
    303K: { apl: 0.711, Dhh: 3.30 }

# 15. WEIGHT/CONFIDENCE ATTRIBUTED TO/INTO THE REFERENCE AA TRAJECTORIES
reference_AA_weight:  # setting value to 0 will disable the usage of the bottom-up component for a given lipid
  POPC: 1.0
  DOPC: 1.0
  DPPC: 1.0
  DMPC: 1.0
  DLPC: 1.0
  SDPC: 0.5
  PDPC: 0.5

# 16. OTHERS PARAMETERS (SHOULD NOT NEED CHANGES)
sim_kill_delay: 45  # number of seconds after which a simulation will be killed if it did not write in its log file
bonds2angles_scoring_factor: 500
next_cycle: False  # for restarting from the single best set of FF parameters in a previous optimization output directory
row_x_scaling: True  # use the same scale on all X axes for bond and angle distribution plots
row_y_scaling: True  # use the same scale on all Y axes for bond and angle distribution plots
